<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <title>VacinAí</title>

    <!-- Meta Tags -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Css -->
    <link rel="stylesheet" href="./styles/reset.css">
    <link rel="stylesheet" href="./styles/main.css">
    <link rel="stylesheet" href="./styles/vacina.css">
</head>

<body>
    <header>
        <h1>VacinAí</h1>
    </header>

    <div id="map"></div>

    <a class="btn" href="/descontos.html">Postos de vacinação</a>
    <a class="btn" href="/index.html">Voltar</a>

    <!-- Api -->
    <script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBA5YYJQqGugyiDwoCcvEtIo6ivfzSpR5k&callback=initMap&libraries=&v=weekly"
        async>
        </script>


    <script>
        let username = 'imunizacao_public';
        let password = 'qlto5t&7r_@+#Tlstigi';
        let url = "http://dados.recife.pe.gov.br/pt_BR/api/3/action/datastore_search";
        let headers = new Headers();

        let response = null ; 

        let data = new FormData();
        data.append("resource_id", 'dbf660d2-1ee5-451a-94ca-7c316e50d0ad');

        headers.append('Authorization', 'Basic' + (username + ":" + password));
        fetch(url, {
            method: "POST",
            body: data
        }).then((response) => response.json())
            .then((responseJson) => {
                response = responseJson.result.records;
                console.log(response);

                // this.setState({
                //     data: responseJson
                // })
            })
            .catch((error) => {
                console.error(error);
            });


        // Initialize and add the map
        function initMap() {
            // The location of Uluru
            const uluru = { lat: -8.0463404, lng: -34.9233807 };

            // The map, centered at Uluru
            const map = new google.maps.Map(document.getElementById("map"), {
                zoom: 4,
                center: uluru,
            });

            // The marker, positioned at Uluru
            const marker = new google.maps.Marker({
                position: uluru,
                map: map,
                title: "Você"
            });
        }
    </script>
</body>

</html>